<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testeo de API</title>
</head>
<body>
    <h1>Testeo de API</h1>
    <button id="btnTraerDatos">Traer datos de la API</button>
    <button id="btnEliminarLocalStorage">eliminar LocalStorage</button>
    <div id="resultado"></div>

    <script>
        function traerDatos() {
            const token = sessionStorage.getItem('jwtToken'); // pregunta si hay un token en SessionStorage
            fetch('http://localhost:8080/register', {
                method: 'GET',
                headers: {
                  'Authorization': `Bearer ${token}`
                }
              })
              .then(response => response.json())
              .then(data => console.log(data))
              .catch(error => console.error('Error:', error));
        }
        
        const botonTraerDatos = document.getElementById('btnTraerDatos'); 
        botonTraerDatos.addEventListener('click', function() {
            traerDatos();
        });
          

          function limpiarToken() {
            sessionStorage.removeItem('jwtToken');
            localStorage.removeItem('jwtToken');
            console.log('Token eliminado del sessionStorage');
          }

            const botonLimpiarToken = document.getElementById('btnEliminarLocalStorage'); 
            botonLimpiarToken.addEventListener('click', function() {
                limpiarToken();
            });
    </script>
</body>
</html>
